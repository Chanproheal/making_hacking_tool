#!usr/bin/env python

import requests
import re
from bs4 import BeautifulSoup
import urllib.parse as urlparse

def request(url) :
    try :
        return requests.get("http://"+url)
    except requests.exceptions.ConnectionError :
        pass


target_url = "192.168.111.154/mutillidae/index.php?page=dns-lookup.php"
response = request(target_url)

parsed_html = BeautifulSoup(response.content)
form_list = parsed_html.findAll("form")
print(form_list)
for form in form_list :
    action = form.get("action")
    post_url = urlparse.urljoin(target_url,action)
    method = form.get("method")

    input_list = form.findAll("input")
    post_data = {}
    for input in input_list :
        input_name = input.get("name")
        input_type = input.get("type")
        input_value = input("value")
        if input_type == "text" :
            input_value = "test"
        post_data[input_name] = input_value
    print(post_data)
    result = requests.post(post_url,data=post_data)
    # print(result.content)

